<div class="row">
    <div class="col-sm-12">
        <div class="card">
            <div class="card-header">
                <h5>{{ isEditMode ? 'Editar Proveedor' : 'Agregar Proveedor' }}</h5>
            </div>
            <div class="card-body">
                <form [formGroup]="supplierForm" (ngSubmit)="onSubmit()">

                    <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Nombre</label>
                            <input type="text" class="form-control" formControlName="name"
                                [class.is-invalid]="supplierForm.get('name')?.invalid && supplierForm.get('name')?.touched">
                            <div *ngIf="supplierForm.get('name')?.invalid && supplierForm.get('name')?.touched"
                                class="invalid-feedback">
                                El nombre es requerido
                            </div>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">NIT / RUT / Tax ID</label>
                            <input type="text" class="form-control" formControlName="tax_id">
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Lista de Precios Predeterminada</label>
                            <select class="form-select" formControlName="price_list_id">
                                <option [value]="null">Ninguna</option>
                                <option *ngFor="let pl of priceLists" [value]="pl.id">{{ pl.name }} ({{ pl.currency }})
                                </option>
                            </select>
                            <small class="text-muted">Se usará automáticamente en las órdenes de compra.</small>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" formControlName="email">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Teléfono</label>
                            <input type="text" class="form-control" formControlName="phone">
                        </div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Dirección</label>
                        <textarea class="form-control" formControlName="address" rows="3"></textarea>
                    </div>

                    <div class="d-flex justify-content-end">
                        <button type="button" class="btn btn-secondary me-2"
                            [routerLink]="['/purchasing/suppliers']">Cancelar</button>
                        <button type="submit" class="btn btn-primary" [disabled]="loading || supplierForm.invalid">
                            <span *ngIf="loading" class="spinner-border spinner-border-sm me-1"></span>
                            {{ isEditMode ? 'Actualizar' : 'Crear' }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>