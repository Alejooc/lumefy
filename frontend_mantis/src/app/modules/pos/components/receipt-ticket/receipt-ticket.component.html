@if (sale) {
  <div class="receipt">
    <div class="header text-center mb-3">
      <!-- Optional Logo -->
      <h4 class="mb-1">{{ company?.name || 'Lumefy ERP' }}</h4>
      @if (company?.nif) {
        <p class="mb-0 text-muted small">NIT/NIF: {{ company?.nif }}</p>
      }
      <p class="mb-0 text-muted small">{{ company?.address }}</p>
      <div class="dashed-line mt-2 mb-2"></div>
      <h6 class="mb-1">TICKET DE VENTA</h6>
      <p class="mb-0 small">N° Orden: {{ sale?.id ? sale.id.substring(0, 8).toUpperCase() : '...' }}</p>
      <p class="mb-0 small">Fecha: {{ sale.date | date:'short' }}</p>
      <div class="dashed-line mt-2 mb-2"></div>
    </div>
    <div class="items mb-3">
      <table class="table table-sm table-borderless mb-0">
        <thead>
          <tr>
            <th class="ps-0 border-bottom border-dark" style="width: 50%;">Cant/Desc</th>
            <th class="text-end pe-0 border-bottom border-dark">Total</th>
          </tr>
        </thead>
        <tbody>
          @for (item of sale.items; track item) {
            <tr>
              <td class="ps-0 pt-2 border-bottom-dashed">
                <div>{{ item._tempProduct?.name || 'Producto' }}</div>
                <div class="small text-muted">{{ item.quantity }} x {{ item.price | currency }}</div>
              </td>
              <td class="text-end pe-0 pt-2 border-bottom-dashed align-middle">
                {{ (item.price * item.quantity) | currency }}
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
    <div class="totals mb-3">
      <div class="d-flex justify-content-between mb-1 pt-2">
        <strong>TOTAL</strong>
        <strong>{{ sale.total | currency }}</strong>
      </div>
      <div class="dashed-line mt-2 mb-2"></div>
      <div class="d-flex justify-content-between small">
        <span>Método de Pago:</span>
        <span>{{ sale.payment_method }}</span>
      </div>
      @if (sale.payment_method !== 'CREDIT') {
        <div class="d-flex justify-content-between small">
          <span>Pagó con:</span>
          <span>{{ sale.amount_paid | currency }}</span>
        </div>
      }
      @if (sale.change > 0) {
        <div class="d-flex justify-content-between small">
          <span>Cambio/Vuelto:</span>
          <span>{{ sale.change | currency }}</span>
        </div>
      }
    </div>
    <div class="text-center mt-4">
      <p class="small mb-1">¡Gracias por su compra!</p>
      <p class="small text-muted">lumefy.com</p>
    </div>
  </div>
}